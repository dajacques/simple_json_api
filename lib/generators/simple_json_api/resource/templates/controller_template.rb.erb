class <%= @controller_name -%> < <%= @base_controller %>
  include SimpleJsonApi::Helper

  def index
    @<%= class_name.underscore.gsub('/', '__').pluralize %> = <%= @model -%>.all.to_a
    render json: SimpleJsonApi.render(
                   model: @<%= class_name.underscore.gsub('/', '__').pluralize %>,
                   serializer: <%= @serializer_name %>,
                   options: options_hash
                 ),
           status: 200,
           content_type: 'application/vnd.api+json'
  end

  def show
    @<%= class_name.underscore.gsub('/', '__') %> = <%= @model -%>.find(params[:id])
    render json: SimpleJsonApi.render(
                   model: @<%= class_name.underscore.gsub('/', '__') %>,
                   serializer: <%= @serializer_name %>,
                   options: options_hash
                 ),
           status: 200,
           content_type: 'application/vnd.api+json'
  end

  private

  def options_hash
    {
      fields: params[:fields],
      include: params[:include]
    }
  end
end
